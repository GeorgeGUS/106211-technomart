var mapLink=document.querySelector(".map-link"),mapWindow=document.querySelector(".map-image-big"),popup=document.querySelectorAll(".modal-window"),closeBtn=document.querySelectorAll(".close-btn"),feedbackBtn=document.querySelector(".feedback-btn"),feedbackWindow=document.querySelector(".feedback-form");if(feedbackWindow)var form=feedbackWindow.querySelector("form"),nameCust=feedbackWindow.querySelector("[name=customer-name]"),emailCust=feedbackWindow.querySelector("[name=customer-email]"),messageCust=feedbackWindow.querySelector("[name=customer-message]");var storageNameCust=localStorage.getItem("nameCust"),storageEmailCust=localStorage.getItem("emailCust"),buyBtn=document.querySelectorAll(".buy"),cartWindow=document.querySelector(".cart-form"),closeCart=document.querySelector(".cart-btn.white");mapLink&&mapLink.addEventListener("click",function(e){e.preventDefault(),mapWindow.classList.add("modal-active")}),feedbackBtn&&feedbackBtn.addEventListener("click",function(e){e.preventDefault(),feedbackWindow.classList.add("modal-active"),storageNameCust&&storageEmailCust?(nameCust.value=storageNameCust,emailCust.value=storageEmailCust,messageCust.focus()):nameCust.focus()});for(var n=0;n<buyBtn.length;n++)buyBtn[n].addEventListener("click",function(e){e.preventDefault(),cartWindow.classList.add("modal-active")});closeCart.addEventListener("click",function(e){e.preventDefault();for(var a=0;a<popup.length;a++)popup[a].classList.remove("modal-active")});for(var i=0;i<popup.length;i++)closeBtn[i].addEventListener("click",function(e){e.preventDefault();for(var a=0;a<popup.length;a++)popup[a].classList.remove("modal-active"),feedbackWindow.classList.remove("modal-error")});window.addEventListener("keydown",function(e){if(27===e.keyCode)for(var a=0;a<popup.length;a++)popup[a].classList.contains("modal-active")&&(popup[a].classList.remove("modal-active"),feedbackWindow.classList.remove("modal-error"))}),form&&form.addEventListener("submit",function(e){nameCust.value&&emailCust.value&&messageCust.value?(localStorage.setItem("nameCust",nameCust.value),localStorage.setItem("emailCust",emailCust.value)):(e.preventDefault(),feedbackWindow.classList.remove("modal-error"),feedbackWindow.offsetWidth=feedbackWindow.offsetWidth,feedbackWindow.classList.add("modal-error"))});